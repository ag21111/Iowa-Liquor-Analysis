renv::init()
install.packages("devtools")
library(devtools)
library(shiny)
renv::snapshot()
renv::update()
renv::status()
renv::dependencies()
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
# Load header script
source("00 Header.R")
WD <- function(...) file.path(dirname(getwd()), ...)
WD
print(WD)
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
# File paths --------------------------------------------------------------
WD <- function(...) file.path(dirname(getwd()), ...)
INPUT <- function(...) WD("01 Input", ...)
SCRIPTS <- function(...) WD("02 Scripts", ...)
OUTPUT <- function(...) WD("03 Output", ...)
if (file.exists(WD("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
View(status)
manage_packages <- function(snapshotDate = "", Rversion = "") {
if (file.exists("renv.lock")) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
if (file.exists("renv.lock")) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
PRODUCTION <- function(...) WD(levels = 1)
if (file.exists(PRODUCTION("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
print(PRODUCTION)
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
WD <- function(...) file.path(dirname(getwd()), ...)
INPUT <- function(...) WD("01 Input", ...)
SCRIPTS <- function(...) WD("02 Scripts", ...)
OUTPUT <- function(...) WD("03 Output", ...)
PRODUCTION <- function(...) WD(levels = 1)
if (file.exists(PRODUCTION("renv.lock")))
{
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
View(status)
status$lockfile
PRODUCTION()
OUTPUT()
WD()
if (file.exists(WD("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
status$changed
if (file.exists(WD("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (!is.null(status$changed) && status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
sessionInfo()
# Read the lock file
lock_data <- fromJSON(lock_file)
lines <- readLines(lock_file)
lock_file <- "renv.lock"
lines <- readLines(lock_file)
lines <- readLines(WD(lock_file))
View(lines)
lines
renv::checkout()
stopifnot(Rversion == getRversion())
n
renv::status()
WD <- function(...) file.path(dirname(getwd()), ...)
INPUT <- function(...) WD("01 Input", ...)
SCRIPTS <- function(...) WD("02 Scripts", ...)
OUTPUT <- function(...) WD("03 Output", ...)
manage_packages <- function(snapshotDate = "2024-10-08", Rversion = "4.4.1") {
stopifnot(Rversion == getRversion())
if (file.exists(WD("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()
# Check if there are any discrepancies
if (!is.null(status$changed) && status$changed) {
message("Restoring the environment...")
renv::restore()
} else {
message("Environment is already up to date.")
}
} else {
message("No renv.lock file found. Please initialize renv or create a lock file.")
}
library(devtools)
library(data.table)
library(openxlsx)
library(stringr)
library(dplyr)
library(ggplot2)
library(sf)
library(tigris)
library(shiny)
library(leaflet)
library(RColorBrewer)
library(zoo)
library(lubridate)
# Enable caching
options(tigris_use_cache = TRUE)
## Print out session information (e.g., R version, imported packages)
sessionInfo()
}
manage_packages(snap.date <- "2024-10-08", getRversion())
# Load necessary packages and setup environment  --------------------------
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
# Manage packages - set snapshot date, check R version, and package location
manage_packages(snap.date <- "2024-10-08", getRversion())
# Set up parameters
# Load Shiny tool
source("03 R Shiny map.R")
# Load necessary packages and setup environment  --------------------------
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
# Load necessary packages and setup environment  --------------------------
#### BEFORE RUNNING SET WORKING DIRECTORY TO THE 02 SCRIPTS FOLDER ####
# i.e. setwd("C:/.../~Production/02 Scripts")
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
# Manage packages - set snapshot date, check R version, and package location
manage_packages(snap.date <- "2024-10-08", getRversion())
# Set up parameters
# Load Shiny tool
source("03 R Shiny map.R")
source("03 R Shiny map.R")
View(shiny_tool)
runApp(shiny_tool)
source("03 R Shiny map.R")
# Load necessary packages and setup environment  --------------------------
#### BEFORE RUNNING SET WORKING DIRECTORY TO THE 02 SCRIPTS FOLDER ####
# i.e. setwd("C:/.../~Production/02 Scripts")
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
# Manage packages - set snapshot date, check R version, and package location
manage_packages(snap.date <- "2024-10-08", getRversion())
# Load Shiny tool
source("03 R Shiny map.R")
if (file.exists(WD("renv.lock"))) {
# Retrieve status of the project environment
status <- renv::status()}
# File paths --------------------------------------------------------------
WD <- function(...) file.path(dirname(getwd()), ...)
INPUT <- function(...) WD("01 Input", ...)
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
# File paths --------------------------------------------------------------
WD <- function(...) file.path(dirname(getwd()), ...)
WD
print(WD)
setwd(WD)
setwd(WD())
getwd()
#### MAKE SURE WORKING DIRECTORY IS SET TO (.../~Production) ####
setwd(WD())
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
getwd()
#### MAKE SURE WORKING DIRECTORY IS SET TO (.../~Production) ####
setwd(WD())
setwd(C:)
setwd("C:/")
# Load necessary packages and setup environment  --------------------------
WD <- function(...) file.path(dirname(getwd()), ...)
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
WD <- function(...) file.path(dirname(getwd()), ...)
setwd(WD())
getwd(WD())
getwd()
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
WD <- function(...) file.path(dirname(getwd()), ...)
setwd(WD())
getwd()
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
# Load necessary packages and setup environment  --------------------------
### SET WORKING DIRECTORY ###
# Clear the global environment and run garbage collection
rm(list = names(.GlobalEnv))
gc()
# Load header script
source("00 Header.R")
setwd("C:/Users/azizg/Downloads/Cybersyn Case/~Production/02 Scripts")
renv::restore
renv::restore()
renv::init()
